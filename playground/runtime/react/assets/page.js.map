{"version":3,"file":"page.js","sources":["../../src/page/App.tsx","../../src/page/main.tsx"],"sourcesContent":["/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2021 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext } from 'react';\n\nimport Core from '@tmagic/core';\nimport type { Page } from '@tmagic/schema';\nimport { AppContent } from '@tmagic/ui-react';\n\nimport './App.css';\n\nfunction App() {\n  const app = useContext<Core | undefined>(AppContent);\n\n  if (!app?.page?.data) {\n    return null;\n  }\n\n  const MagicUiPage = app.resolveComponent('page');\n\n  return <MagicUiPage config={app?.page?.data as Page}></MagicUiPage>;\n}\n\nexport default App;\n","/*\n * Tencent is pleased to support the open source community by making TMagicEditor available.\n *\n * Copyright (C) 2021 THL A29 Limited, a Tencent company.  All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Core from '@tmagic/core';\nimport type { MApp } from '@tmagic/schema';\nimport { AppContent } from '@tmagic/ui-react';\nimport { getUrlParam } from '@tmagic/utils';\n\nimport entry from '../comp-entry';\n\nimport App from './App';\ndeclare global {\n  interface Window {\n    magicDSL: MApp[];\n    magicPresetComponents: any;\n    magicPresetConfigs: any;\n    magicPresetValues: any;\n  }\n}\n\nconst getLocalConfig = (): MApp[] => {\n  const configStr = localStorage.getItem('magicDSL');\n  if (!configStr) return [];\n  try {\n    // eslint-disable-next-line no-eval\n    return [eval(`(${configStr})`)];\n  } catch (err) {\n    return [];\n  }\n};\n\nwindow.magicDSL = [];\n\nconst app = new Core({\n  config: ((getUrlParam('localPreview') ? getLocalConfig() : window.magicDSL) || [])[0] || {},\n  curPage: getUrlParam('page'),\n});\n\nObject.keys(entry.components).forEach((type: string) => app.registerComponent(type, entry.components[type]));\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppContent.Provider value={app}>\n      <App />\n    </AppContent.Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"names":["useContext","Core"],"mappings":";KA0BA,cAAe,SACP,KAAA,GAAMA,yBAA6B,UAAU,EAE/C,GAAA,CAAC,qBAAK,OAAL,QAAW,MACP,MAAA,MAGH,KAAA,GAAc,EAAI,iBAAiB,MAAM,EAE/C,MAAQ,OAAA,cAAA,EAAA,CAAY,OAAQ,oBAAK,OAAL,cAAW,IAAA,CAAc,CACvD,CCEA,KAAM,gBAAiB,IAAc,CAC7B,KAAA,WAAY,aAAa,QAAQ,UAAU,EACjD,GAAI,CAAC,UAAW,MAAO,GACnB,GAAA,CAEF,MAAO,CAAC,KAAK,IAAI,YAAY,CAAC,QACvB,GACP,MAAO,EACT,CACF,EAEA,OAAO,SAAW,CAAA,EAElB,KAAM,KAAM,GAAIC,OAAK,CACnB,OAAsB,cAAA,cAAc,EAAI,iBAAmB,OAAO,WAAa,IAAI,IAAM,CAAC,EAC1F,QAAS,YAAY,MAAM,CAC7B,CAAC,EAED,OAAO,KAAK,MAAM,UAAU,EAAE,QAAQ,AAAC,GAAiB,IAAI,kBAAkB,EAAM,MAAM,WAAW,EAAK,CAAC,EAE3G,SAAS,OACN,MAAA,cAAA,MAAM,WAAN,KACC,MAAA,cAAC,WAAW,SAAX,CAAoB,MAAO,GAAA,EAC1B,MAAA,cAAC,QAAI,CACP,CACF,EACA,SAAS,eAAe,MAAM,CAChC"}