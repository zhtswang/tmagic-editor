import{A as g,a as m,n as v}from"./plugin-vue2_normalizer.8af86375.js";const h="modulepreload",f={},w="/tmagic-editor/playground/runtime/vue2/",_=function(u,t){return!t||t.length===0?u():Promise.all(t.map(s=>{if(s=`${w}${s}`,s in f)return;f[s]=!0;const a=s.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${c}`))return;const e=document.createElement("link");if(e.rel=a?"stylesheet":h,a||(e.as="script",e.crossOrigin=""),e.href=s,document.head.appendChild(e),a)return new Promise((r,o)=>{e.addEventListener("load",r),e.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>u())};var E=Vue.defineComponent({setup(){const n=Vue.ref(),u=Vue.ref(),t=Vue.ref(),s=Vue.computed(()=>{var c,e,r,o;return((e=(c=n.value)==null?void 0:c.items)==null?void 0:e.find(i=>i.id===u.value))||((o=(r=n.value)==null?void 0:r.items)==null?void 0:o[0])}),a=new g({config:n.value,platform:"editor"});return Vue.provide("app",a),Vue.watch(s,async()=>{await Vue.nextTick();const c=document.querySelector(".magic-ui-page");c&&window.magic.onPageElUpdate(c)}),Vue.onMounted(()=>{var c;(c=window.magic)==null||c.onRuntimeReady({getApp(){return a},updateRootConfig(e){console.log("update config",e),n.value=e,a==null||a.setConfig(e,u.value)},updatePageId(e){console.log("update page id",e),u.value=e,a==null||a.setPage(e)},getSnapElements(){return Array.from(document.querySelectorAll("[class*=magic-ui][id]"))},select(e){console.log("select config",e),t.value=e;const r=document.getElementById(`${e}`);return r||Vue.nextTick().then(()=>document.getElementById(`${e}`))},add({config:e}){var l;if(console.log("add config",e),!n.value)throw new Error("error");if(!t.value)throw new Error("error");const r=m(t.value,[n.value]),o=r.pop(),i=o!=null&&o.items?o:r.pop();if(!i)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");(l=i.items)==null||l.push(e)},update({config:e}){var p;if(console.log("update config",e),!n.value)throw new Error("error");const r=m(e.id,[n.value]),o=r.pop(),i=r.pop();if(!o)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u8282\u70B9");if(!i)throw new Error("\u672A\u627E\u5230\u7236\u8282\u70B9");const l=(p=i.items)==null?void 0:p.findIndex(d=>d.id===o.id);i.items.splice(l,1,Vue.reactive(e))},remove({id:e}){var p;if(!n.value)throw new Error("error");const r=m(e,[n.value]),o=r.pop();if(!o)throw new Error("\u672A\u627E\u5230\u76EE\u6807\u5143\u7D20");const i=r.pop();if(!i)throw new Error("\u672A\u627E\u5230\u7236\u5143\u7D20");const l=(p=i.items)==null?void 0:p.findIndex(d=>d.id===o.id);i.items.splice(l,1)}})}),{pageConfig:s}}});var y=function(){var u=this,t=u._self._c;return u._self._setupProxy,u.pageConfig?t("magic-ui-page",{attrs:{config:u.pageConfig}}):u._e()},V=[],A=v(E,y,V,!1,null,null,null,null),C=A.exports;_(()=>import("./comp-entry.1d39d0dd.js"),["assets/comp-entry.1d39d0dd.js","assets/plugin-vue2_normalizer.8af86375.js"]).then(()=>{const{components:n,plugins:u}=window.magicPresetComponents;Object.values(n).forEach(t=>{Vue.component(t.name,t)}),Object.values(u).forEach(t=>{Vue.use(t)}),new Vue({render:t=>t(C),el:"#app"})});
//# sourceMappingURL=playground.js.map
